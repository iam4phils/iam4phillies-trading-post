<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Card Details – iam4phillies Trading Post</title>
  <link rel="stylesheet" href="css/style.css">
  <script>
async function loadCard() {
    const params = new URLSearchParams(window.location.search);
    const year = params.get("year");
    const id = parseInt(params.get("id"));

    if (!year || !id) {
        document.getElementById("card-container").innerHTML =
            "<p>Invalid card link.</p>";
        return;
    }

    const response = await fetch(`data/topps_baseball_${year}.json`);
    const cards = await response.json();

    const card = cards.find(c => c.id === id);

    if (!card) {
        document.getElementById("card-container").innerHTML =
            "<p>Card not found.</p>";
        return;
    }

    document.getElementById("card-title").textContent =
        `${card.year} Topps #${card.number} - ${card.player}`;

    document.getElementById("front-img").src = card.front_url;
    document.getElementById("back-img").src = card.back_url;

    document.getElementById("player").textContent = card.player;
    document.getElementById("team").textContent = card.team;
    document.getElementById("note").textContent = card.note || "";
    document.getElementById("price-raw").textContent = card.price_raw;
    document.getElementById("price-psa9").textContent = card.price_psa9;
    document.getElementById("price-psa10").textContent = card.price_psa10;

    const ebayLink = document.getElementById("ebay-link");
    ebayLink.href = card.ebay_url || "#";
    ebayLink.style.display = card.ebay_url ? "inline-block" : "none";
}

loadCard();
</script>
</head>

<body>
  <header>
    <h1 id="title">Card Details</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="inventory.html">Inventory</a>
    </nav>
  </header>

  <section class="card-detail">
    <img id="front" alt="Front of card">
    <img id="back" alt="Back of card">

    <h2 id="player"></h2>
    <p id="team"></p>
    <p id="note"></p>

    <h3>Pricing</h3>
    <ul>
      <li>Raw: <span id="raw"></span></li>
      <li>PSA 9: <span id="psa9"></span></li>
      <li>PSA 10: <span id="psa10"></span></li>
    </ul>

    <a id="ebay" class="button" target="_blank">View on eBay</a>
  </section>

  <footer>
    <p>© 2026 iam4phillies Trading Post</p>
  </footer>
</body>
</html>